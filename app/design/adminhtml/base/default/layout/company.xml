<?xml version="1.0"?>
<layout>
    <adminhtml_company_company_index>
        <reference name="menu">
            <action method="setActive">
                <menupath>company/company</menupath>
            </action>
        </reference>
        <reference name="content">
            <block type="company/adminhtml_company" name="company_company" />
        </reference>
    </adminhtml_company_company_index>
    <adminhtml_company_company_grid>
        <block type="core/text_list" name="root" output="toHtml">
            <block type="company/adminhtml_company_grid" name="company_grid"/>
        </block>
    </adminhtml_company_company_grid>
    <adminhtml_company_company_edit>
        <reference name="menu">
            <action method="setActive">
                <menupath>company/company/edit</menupath>
            </action>
        </reference>
        <reference name="head">
            <action method="setCanLoadTinyMce"><load>1</load></action>
            <action method="addJs"><script>jsonedit/jsoneditor.js</script></action>
        </reference>
        <update handle="editor"/>
        <reference name="content">
            <block type="company/adminhtml_company_edit" name="company_edit"/>
        </reference>
        <reference name="left">
            <block type="adminhtml/store_switcher" name="store_switcher" before="-"/>
            <block type="company/adminhtml_company_edit_tabs" name="company_tabs"/>
        </reference>
        <reference name="js">
            <block type="adminhtml/template" name="catalog.wysiwyg.js" template="catalog/wysiwyg/js.phtml"/>
            <block type="adminhtml/template" name="edit.configuration.js" template="company/parser/edit-config-js.phtml" />
            <block type="adminhtml/template" name="edit.price.type.js" template="company/parser/edit-price-type-js.phtml" />
            <block type="adminhtml/template" name="new.configuration.js" template="company/parser/new-configuration-js.phtml" />
        </reference>
    </adminhtml_company_company_edit>
    <adminhtml_company_company_editproduct>
        <remove name="menu" />
        <remove name="header" />
        <remove name="footer" />
        <reference name="head">
            <action method="addItem">
                <type>js_css</type>
                <name>prototype/windows/themes/default.css</name>
            </action>
            <action method="addCss">
                <name>lib/prototype/windows/themes/magento.css</name>
            </action>
        </reference>
        <reference name="content">
            <block type="company/adminhtml_product_edit" name="product_edit"/>
        </reference>
    </adminhtml_company_company_editproduct>
    <adminhtml_company_company_saveproduct>
        <remove name="menu" />
        <remove name="header" />
        <remove name="footer" />
        <reference name="head">
            <action method="addItem">
                <type>js_css</type>
                <name>prototype/windows/themes/default.css</name>
            </action>
            <action method="addCss">
                <name>lib/prototype/windows/themes/magento.css</name>
            </action>
        </reference>
        <reference name="content">
            <block type="company/adminhtml_product_edit" name="product_edit"/>
        </reference>
    </adminhtml_company_company_saveproduct>
<!-- Parser path -->
    <adminhtml_parser_queue_queue>
        <reference name="content">
            <block type="company/adminhtml_parser_queue" name="queue_grid"/>
        </reference>
    </adminhtml_parser_queue_queue>

    <adminhtml_parser_parser_task>
        <reference name="content">
            <block type="company/adminhtml_parser_task" name="task_grid"/>
        </reference>
    </adminhtml_parser_parser_task>

    <adminhtml_parser_parser_log>
        <reference name="content">
            <block type="company/adminhtml_parser_log" name="log_grid"/>
        </reference>
    </adminhtml_parser_parser_log>

    <adminhtml_parser_parser_configuration>
        <block type="core/text_list" name="root" output="toHtml">
            <block type="company/adminhtml_parser_config" name="price_configuration_grid"/>
            <block type="adminhtml/widget_grid_serializer" name="configuration_grid_serializer">
                <reference name="configuration_grid_serializer">
                    <action method="initSerializerBlock">
                        <grid_block_name>catalog.product.edit.tab.related</grid_block_name>
                        <data_callback>getSelectedRelatedProducts</data_callback>
                        <hidden_input_name>links[related]</hidden_input_name>
                        <reload_param_name>products_related</reload_param_name>
                    </action>
                    <action method="addColumnInputName">
                        <input_name>position</input_name>
                    </action>
                </reference>
            </block>
        </block>
    </adminhtml_parser_parser_configuration>

    <adminhtml_parser_parser_configurationgrid>
        <block type="core/text_list" name="root" output="toHtml">
            <block type="adminhtml/catalog_product_edit_tab_related" name="catalog.product.edit.tab.related"/>
        </block>
    </adminhtml_parser_parser_configurationgrid>


    <parser_configuration_grid>
        <reference name="content">
            <block type="company/adminhtml_parser_config" name="price_configuration_grid"/>
        </reference>
    </parser_configuration_grid>
    <edit_price_type>
        <reference name="content">
            <block type="company/adminhtml_parser_priceType" name="price_type_grid"/>
        </reference>
    </edit_price_type>
    <add_price_type_form>
        <block type="company/adminhtml_parser_priceTypeForm" name="price_type_form"/>
    </add_price_type_form>
</layout>